# Travis CI configuration file for psycopg2

language: python

dist: bionic

arch:
  - amd64
  - arm64

python:
  - 3.5
  - 3.6
  - 3.7
  - 3.8

env:
  global:
    - TEST_PAST=${TEST_PAST:-0}
    - TEST_FUTURE=${TEST_FUTURE:-0}
    - TEST_VERBOSE=${TEST_VERBOSE:-0}
    - PSYCOPG2_TEST_FAST=${PSYCOPG2_TEST_FAST:-0}
    - TEST_PRESENT=${TEST_PRESENT:-1}

matrix:
  include:
    - python: 2.7

install:
  - sudo apt-get install -y bc
  - pip install -U pip setuptools wheel
  - pip install .
  - rm -rf psycopg2.egg-info
  - sudo scripts/travis_prepare.sh

script:
  - scripts/travis_test.sh

deploy:
  - provider: script
    script: bash scripts/travis_update_docs.sh
    on:
      branch: master

notifications:
  email: false
